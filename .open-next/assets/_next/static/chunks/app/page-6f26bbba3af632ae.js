(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{521:(e,t,a)=>{Promise.resolve().then(a.bind(a,8147))},960:(e,t,a)=>{"use strict";async function s(e,t){let a=await fetch("".concat("/api").concat(e),{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers}});if(!a.ok)throw Error("API error: ".concat(a.status));return a.json()}a.d(t,{E3:()=>i,PA:()=>l,gJ:()=>r});let r={list:()=>s("/exercises"),create:e=>s("/exercises",{method:"POST",body:JSON.stringify(e)}),getPrevious:e=>s("/exercises/previous",{method:"POST",body:JSON.stringify({exercise_ids:e})})},l={list:()=>s("/workouts"),create:e=>s("/workouts",{method:"POST",body:JSON.stringify(e)})},i={list:()=>s("/templates"),get:e=>s("/templates/".concat(e)),create:e=>s("/templates",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s("/templates/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s("/templates/".concat(e),{method:"DELETE"})}},1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>d,L3:()=>x,c7:()=>u,lG:()=>n});var s=a(5155);a(2115);var r=a(5229),l=a(7539),i=a(4269);function n(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,s.jsx)(l.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function d(e){let{className:t,children:a,showCloseButton:n=!0,...d}=e;return(0,s.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...d,children:[a,n&&(0,s.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(r.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",t),...a})}a(3998)},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var s=a(5155);a(2115);var r=a(3101),l=a(2467),i=a(4269);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a="default",size:r="default",asChild:o=!1,...c}=e,d=o?l.bL:"button";return(0,s.jsx)(d,{"data-slot":"button","data-variant":a,"data-size":r,className:(0,i.cn)(n({variant:a,size:r,className:t})),...c})}},4269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(5889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},5142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(5155);a(2115);var r=a(4269);function l(e){let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},6651:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5121).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>o,ZB:()=>n,Zp:()=>l,aR:()=>i});var s=a(5155);a(2115);var r=a(4269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},7619:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(5155),r=a(5239);let l={sm:48,md:80,lg:120,xl:160},i={Chest:"/images/duck-chest.png",Back:"/images/duck-back.png",Legs:"/images/duck-legs.png",Arms:"/images/duck-arms.png",Shoulders:"/images/duck-arms.png",Core:"/images/duck-mascot.png","Full Body":"/images/duck-mascot.png"};function n(e){let{muscleGroup:t,variant:a="default",size:n="md",className:o="",animate:c=!0}=e,d="/images/duck-mascot.png";"pr"===a?d="/images/duck-pr.png":"failure"===a?d="/images/duck-failure.png":t&&i[t]&&(d=i[t]);let u=l[n];return(0,s.jsx)("div",{className:"".concat(o," ").concat(c?"animate-bounce":""),style:{width:u,height:u},children:(0,s.jsx)(r.default,{src:d,alt:"Duck mascot - ".concat(t||a),width:u,height:u,className:"object-contain",priority:!0})})}},7937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5121).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8147:(e,t,a)=>{"use strict";a.d(t,{default:()=>F});var s=a(5155),r=a(2115),l=a(5121);let i=(0,l.A)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]),n=(0,l.A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var o=a(7937);let c=(0,l.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),d=(0,l.A)("layout-template",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),u=(0,l.A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var x=a(960),h=a(7619),m=a(3998),g=a(5142),p=a(1834),f=a(9347),b=a(4982),v=a(6651),y=a(6191),j=a(8722);function w(e){let{open:t,onOpenChange:a,onSelectTemplate:l,onStartEmpty:i}=e,{templates:n,loading:o}=(0,j.o)(),[c,d]=(0,r.useState)(""),u=n.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())),x=e=>{let{template:t}=e;return(0,s.jsxs)("button",{onClick:()=>{l(t.id),a(!1)},className:"w-full bg-white rounded-2xl border-2 border-[#E5E5E5] hover:border-[#58CC02] hover:shadow-lg transition-all overflow-hidden group",children:[(0,s.jsxs)("div",{className:"h-[100px] bg-gradient-to-b from-[#F7F7F7] to-white flex items-center justify-center relative",children:[(0,s.jsx)(h.A,{muscleGroup:t.muscleGroup,size:"lg",animate:!1}),t.isFavorite&&(0,s.jsx)("div",{className:"absolute top-2 right-2",children:(0,s.jsx)(f.A,{className:"h-5 w-5 fill-[#FFD700] text-[#FFD700]"})})]}),(0,s.jsxs)("div",{className:"p-3 text-left border-t border-[#F0F0F0]",children:[(0,s.jsx)("h3",{className:"font-bold text-[#3C3C3C] truncate group-hover:text-[#58CC02] transition-colors",children:t.name}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-sm text-[#AFAFAF]",children:[(0,s.jsx)(b.A,{className:"h-3 w-3"}),(0,s.jsxs)("span",{children:[t.exercise_count||0," exercises"]})]}),t.muscleGroup&&(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-[#E8F5E9] text-[#58CC02]",children:t.muscleGroup})})]})]})};return(0,s.jsx)(p.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(p.Cf,{className:"max-w-lg max-h-[90vh] overflow-hidden flex flex-col p-0",children:[(0,s.jsx)(p.c7,{className:"p-4 pb-0",children:(0,s.jsx)(p.L3,{className:"text-xl font-bold text-[#3C3C3C]",children:"選擇訓練模板 \uD83E\uDD86"})}),(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[#AFAFAF]"}),(0,s.jsx)(g.p,{placeholder:"搜尋模板...",value:c,onChange:e=>d(e.target.value),className:"pl-10 border-2 border-[#E5E5E5] focus:border-[#58CC02]"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:o?(0,s.jsx)("div",{className:"text-center py-12 text-[#AFAFAF]",children:"載入中..."}):0!==u.length||c?0===u.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 mx-auto text-[#E5E5E5] mb-2"}),(0,s.jsxs)("p",{className:"text-[#AFAFAF]",children:["找不到「",c,"」"]})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:u.map(e=>(0,s.jsx)(x,{template:e},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(h.A,{size:"xl",className:"mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-[#AFAFAF] font-medium",children:"還沒有模板"}),(0,s.jsx)("p",{className:"text-sm text-[#AFAFAF] mt-1",children:"完成一次訓練後可以儲存為模板！"})]})}),(0,s.jsx)("div",{className:"p-4 border-t bg-white",children:(0,s.jsxs)(m.$,{variant:"outline",className:"w-full border-2 border-[#1CB0F6] text-[#1CB0F6] hover:bg-[#E8F7FE] py-6 rounded-xl font-bold",onClick:()=>{i(),a(!1)},children:[(0,s.jsx)(y.A,{className:"h-5 w-5 mr-2"}),"開始空白訓練"]})})]})})}var N=a(6948);function k(e){let{daysSinceLastWorkout:t,onStartWorkout:a,onDismiss:r}=e;return(0,s.jsxs)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:[(0,s.jsx)(N.Zp,{className:"bg-white rounded-3xl shadow-2xl max-w-sm w-full mx-4 overflow-hidden",children:(0,s.jsxs)(N.Wu,{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("div",{className:"animate-shake",children:(0,s.jsx)(h.A,{variant:"failure",size:"xl",animate:!1})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-[#3C3C3C] mb-2",children:"嘿！"}),(0,s.jsxs)("p",{className:"text-lg text-[#AFAFAF] mb-6",children:["你已經"," ",(0,s.jsx)("span",{className:"font-bold text-[#FF4B4B]",children:t})," ","天沒來運動了！"]}),(0,s.jsx)(m.$,{size:"lg",className:"w-full bg-[#58CC02] hover:bg-[#46A302] text-white text-lg py-6 rounded-2xl font-bold mb-3",onClick:a,children:"現在開始運動 \uD83D\uDCAA"}),(0,s.jsx)(m.$,{variant:"ghost",className:"w-full text-[#AFAFAF] hover:text-[#3C3C3C]",onClick:r,children:"稍後提醒"})]})}),(0,s.jsx)("style",{children:"\n        @keyframes shake {\n          0%, 100% { transform: translateX(0) rotate(0deg); }\n          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px) rotate(-3deg); }\n          20%, 40%, 60%, 80% { transform: translateX(5px) rotate(3deg); }\n        }\n        .animate-shake {\n          animation: shake 0.8s ease-in-out infinite;\n        }\n      "})]})}var C=a(63);function F(){let e=(0,C.useRouter)(),[t,a]=(0,r.useState)(null),[l,m]=(0,r.useState)(!0),[g,p]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await x.PA.list(),t=0;e.forEach(e=>{(e.workout_logs||[]).forEach(e=>{let a=(e.weight||0)*(e.reps||0);t+=a})});let s=0,r=0;if(e.length>0){let t=new Date;t.setHours(0,0,0,0);let a=new Set(e.map(e=>new Date(e.startedAt).toISOString().split("T")[0]));for(let e=0;e<365;e++){let r=new Date(t);r.setDate(t.getDate()-e);let l=r.toISOString().split("T")[0];if(a.has(l))s++;else if(e>0)break}let l=new Date(e[0].startedAt);l.setHours(0,0,0,0),r=Math.floor((t.getTime()-l.getTime())/864e5)}a({total_sessions:e.length,total_volume_kg:Math.round(t),streak_days:s,hearts:70,daysSinceLastWorkout:r}),r>2&&b(!0)}catch(e){console.error("Failed to fetch workout data:",e)}finally{m(!1)}},y=t?t.total_sessions%5:0;return l?(0,s.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-400",children:"Loading..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-white flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[(0,s.jsx)("div",{className:"text-xl font-bold text-[#58CC02]",children:"Workout"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(i,{className:"w-7 h-7 text-[#FF9600]",fill:"#FF9600"}),(0,s.jsx)("span",{className:"font-bold text-lg text-gray-700",children:(null==t?void 0:t.streak_days)||0})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(n,{className:"w-7 h-7 text-[#FF4B4B]",fill:"#FF4B4B"}),(0,s.jsx)("span",{className:"font-bold text-lg text-gray-700",children:(null==t?void 0:t.hearts)||0})]})]}),(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-1 h-4 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-[#58CC02] rounded-full transition-all duration-500",style:{width:"".concat(y/5*100,"%")}})}),(0,s.jsx)("span",{className:"text-2xl",children:"⭐"})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center px-5 py-4",children:[(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsxs)("div",{className:"absolute -top-1 right-0 translate-x-4 bg-white border-2 border-gray-200 rounded-2xl px-3 py-2 shadow-sm z-10",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"Time to lift!"}),(0,s.jsx)("div",{className:"absolute -bottom-2 left-4 w-3 h-3 bg-white border-b-2 border-r-2 border-gray-200 transform rotate-45"})]}),(0,s.jsx)("div",{className:"w-32 h-32 flex items-center justify-center",children:(0,s.jsx)(h.A,{size:"xl",animate:!0})})]}),(0,s.jsxs)("button",{onClick:()=>e.push("/analytics"),className:"mb-5 px-5 py-2.5 rounded-full border-2 border-[#58CC02] text-[#58CC02] font-bold text-sm flex items-center gap-1 hover:bg-green-50 active:scale-95 transition-all",children:["Progress: ",(null==t?void 0:t.total_sessions)||0," workouts",(0,s.jsx)(o.A,{className:"w-4 h-4"})]}),(0,s.jsxs)("div",{className:"w-full space-y-3",children:[(0,s.jsx)("button",{onClick:()=>p(!0),className:"w-full py-5 rounded-2xl bg-[#58CC02] text-white font-black text-lg uppercase tracking-wide shadow-[0_4px_0_0_#46A302] hover:bg-[#4CB302] active:shadow-none active:translate-y-1 transition-all",children:"Start Workout"}),(0,s.jsxs)("button",{onClick:()=>e.push("/exercises"),className:"w-full py-5 rounded-2xl bg-[#FF9600] text-white font-black text-lg uppercase tracking-wide shadow-[0_4px_0_0_#E68600] hover:bg-[#F08C00] active:shadow-none active:translate-y-1 transition-all flex items-center justify-center gap-2",children:[(0,s.jsx)(c,{className:"w-5 h-5"}),"Exercise Library"]})]})]}),(0,s.jsxs)("div",{className:"px-5 pb-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,s.jsxs)("div",{className:"bg-gray-100 rounded-2xl p-4 text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-[#58CC02]",children:(null==t?void 0:t.total_sessions)||0}),(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Workouts"})]}),(0,s.jsxs)("div",{className:"bg-gray-100 rounded-2xl p-4 text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-[#1CB0F6]",children:(null==t?void 0:t.total_volume_kg.toLocaleString())||0}),(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Total kg"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>e.push("/templates"),className:"py-4 rounded-2xl border-2 border-[#1CB0F6] text-[#1CB0F6] font-bold text-base flex items-center justify-center gap-2 hover:bg-blue-50 active:scale-[0.98] transition-all",children:[(0,s.jsx)(d,{className:"w-5 h-5"}),"模板"]}),(0,s.jsxs)("button",{onClick:()=>e.push("/analytics"),className:"py-4 rounded-2xl border-2 border-[#FF9600] text-[#FF9600] font-bold text-base flex items-center justify-center gap-2 hover:bg-orange-50 active:scale-[0.98] transition-all",children:[(0,s.jsx)(u,{className:"w-5 h-5"}),"統計"]})]})]}),(0,s.jsx)("div",{className:"h-6 bg-white"}),(0,s.jsx)(w,{open:g,onOpenChange:p,onSelectTemplate:t=>{e.push("/log?template=".concat(t))},onStartEmpty:()=>{e.push("/log")}}),f&&t&&(0,s.jsx)(k,{daysSinceLastWorkout:t.daysSinceLastWorkout,onStartWorkout:()=>{b(!1),p(!0)},onDismiss:()=>b(!1)})]})}},8722:(e,t,a)=>{"use strict";a.d(t,{M:()=>i,o:()=>l});var s=a(2115),r=a(960);function l(){let[e,t]=(0,s.useState)([]),[a,l]=(0,s.useState)(!0),[i,n]=(0,s.useState)(null),o=(0,s.useCallback)(async()=>{l(!0),n(null);try{let e=await r.E3.list();t(e)}catch(e){console.error("Failed to fetch templates:",e),n(e instanceof Error?e.message:"Failed to fetch templates")}finally{l(!1)}},[]);(0,s.useEffect)(()=>{o()},[o]);let c=(0,s.useCallback)(async(e,t,a,s,l)=>{try{let i=await r.E3.create({name:e,exercises:t,description:a,is_favorite:s,muscle_group:l});return await o(),i.id}catch(e){throw console.error("Failed to create template:",e),e}},[o]),d=(0,s.useCallback)(async t=>{try{let a=e.find(e=>e.id===t);await r.E3.update(t,{use_count:((null==a?void 0:a.useCount)||0)+1,last_used_at:new Date().toISOString()})}catch(e){console.error("Failed to update template usage:",e)}},[e]),u=(0,s.useCallback)(async e=>{try{await r.E3.delete(e),await o()}catch(e){throw console.error("Failed to delete template:",e),e}},[o]),x=(0,s.useCallback)(async(e,t)=>{try{await r.E3.update(e,{is_favorite:t}),await o()}catch(e){throw console.error("Failed to toggle favorite:",e),e}},[o]);return{templates:e,loading:a,error:i,refetch:o,createTemplate:c,updateTemplateUsage:d,deleteTemplate:u,toggleFavorite:x}}function i(e){let[t,a]=(0,s.useState)([]),[l,i]=(0,s.useState)(!1),[n,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(!e)return void a([]);(async()=>{i(!0),o(null);try{let t=await r.E3.get(e);a(t)}catch(e){console.error("Failed to fetch template details:",e),o(e instanceof Error?e.message:"Failed to fetch template details")}finally{i(!1)}})()},[e]),{exercises:t,loading:l,error:n}}},9347:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(5121).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])}},e=>{e.O(0,[888,243,394,441,255,358],()=>e(e.s=521)),_N_E=e.O()}]);