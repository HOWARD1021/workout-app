(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[814],{1244:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>et});var s=a(5155),r=a(2115),i=a(2619),l=a.n(i),n=a(3998),d=a(6948),o=a(3101),c=a(2467),u=a(4269);let x=(0,o.F)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function m(e){let{className:t,variant:a="default",asChild:r=!1,...i}=e,l=r?c.bL:"span";return(0,s.jsx)(l,{"data-slot":"badge","data-variant":a,className:(0,u.cn)(x({variant:a}),t),...i})}var g=a(5646);function p(e){let{...t}=e;return(0,s.jsx)(g.bL,{"data-slot":"alert-dialog",...t})}function h(e){let{...t}=e;return(0,s.jsx)(g.ZL,{"data-slot":"alert-dialog-portal",...t})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(g.hJ,{"data-slot":"alert-dialog-overlay",className:(0,u.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function v(e){let{className:t,size:a="default",...r}=e;return(0,s.jsxs)(h,{children:[(0,s.jsx)(f,{}),(0,s.jsx)(g.UC,{"data-slot":"alert-dialog-content","data-size":a,className:(0,u.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 group/alert-dialog-content fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 data-[size=sm]:max-w-xs data-[size=default]:sm:max-w-lg",t),...r})]})}function b(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,u.cn)("grid grid-rows-[auto_1fr] place-items-center gap-1.5 text-center has-data-[slot=alert-dialog-media]:grid-rows-[auto_auto_1fr] has-data-[slot=alert-dialog-media]:gap-x-6 sm:group-data-[size=default]/alert-dialog-content:place-items-start sm:group-data-[size=default]/alert-dialog-content:text-left sm:group-data-[size=default]/alert-dialog-content:has-data-[slot=alert-dialog-media]:grid-rows-[auto_1fr]",t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,u.cn)("flex flex-col-reverse gap-2 group-data-[size=sm]/alert-dialog-content:grid group-data-[size=sm]/alert-dialog-content:grid-cols-2 sm:flex-row sm:justify-end",t),...a})}function y(e){let{className:t,...a}=e;return(0,s.jsx)(g.hE,{"data-slot":"alert-dialog-title",className:(0,u.cn)("text-lg font-semibold sm:group-data-[size=default]/alert-dialog-content:group-has-data-[slot=alert-dialog-media]/alert-dialog-content:col-start-2",t),...a})}function N(e){let{className:t,...a}=e;return(0,s.jsx)(g.VY,{"data-slot":"alert-dialog-description",className:(0,u.cn)("text-muted-foreground text-sm",t),...a})}function w(e){let{className:t,variant:a="default",size:r="default",...i}=e;return(0,s.jsx)(n.$,{variant:a,size:r,asChild:!0,children:(0,s.jsx)(g.rc,{"data-slot":"alert-dialog-action",className:(0,u.cn)(t),...i})})}function k(e){let{className:t,variant:a="outline",size:r="default",...i}=e;return(0,s.jsx)(n.$,{variant:a,size:r,asChild:!0,children:(0,s.jsx)(g.ZD,{"data-slot":"alert-dialog-cancel",className:(0,u.cn)(t),...i})})}var z=a(5142),_=a(489);function C(e){let{className:t,...a}=e;return(0,s.jsx)(_.b,{"data-slot":"label",className:(0,u.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}function A(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,u.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var S=a(4033),F=a(5917),L=a(2108),$=a(2558);function E(e){let{...t}=e;return(0,s.jsx)($.bL,{"data-slot":"select",...t})}function G(e){let{...t}=e;return(0,s.jsx)($.WT,{"data-slot":"select-value",...t})}function Z(e){let{className:t,size:a="default",children:r,...i}=e;return(0,s.jsxs)($.l9,{"data-slot":"select-trigger","data-size":a,className:(0,u.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[r,(0,s.jsx)($.In,{asChild:!0,children:(0,s.jsx)(S.A,{className:"size-4 opacity-50"})})]})}function O(e){let{className:t,children:a,position:r="item-aligned",align:i="center",...l}=e;return(0,s.jsx)($.ZL,{children:(0,s.jsxs)($.UC,{"data-slot":"select-content",className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,align:i,...l,children:[(0,s.jsx)(W,{}),(0,s.jsx)($.LM,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(B,{})]})})}function P(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)($.q7,{"data-slot":"select-item",className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)($.VF,{children:(0,s.jsx)(F.A,{className:"size-4"})})}),(0,s.jsx)($.p4,{children:a})]})}function W(e){let{className:t,...a}=e;return(0,s.jsx)($.PP,{"data-slot":"select-scroll-up-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(L.A,{className:"size-4"})})}function B(e){let{className:t,...a}=e;return(0,s.jsx)($.wn,{"data-slot":"select-scroll-down-button",className:(0,u.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(S.A,{className:"size-4"})})}var T=a(1834),V=a(6191),R=a(9476),D=a(1360),I=a(5229),J=a(6046);let U=[{value:"Chest",label:"胸 Chest"},{value:"Back",label:"背 Back"},{value:"Legs",label:"腿 Legs"},{value:"Arms",label:"手臂 Arms"},{value:"Shoulders",label:"肩膀 Shoulders"},{value:"Core",label:"核心 Core"},{value:"Full Body",label:"全身 Full Body"}];function q(e){let{open:t,onClose:a,onSave:i,initialData:l,exercises:o}=e,[c,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[h,f]=(0,r.useState)([]),[v,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{l?(u(l.name),m(l.description||""),p(l.muscleGroup||""),f(l.exercises||[])):(u(""),m(""),p(""),f([]))},[l,t]);let j=(e,t,a)=>{let s=[...h];if(s[e]={...s[e],[t]:a},"exercise_id"===t){let t=o.find(e=>e.id===a);s[e].exercise_name=null==t?void 0:t.name}f(s)},y=(e,t)=>{if(t<0||t>=h.length)return;let a=[...h],[s]=a.splice(e,1);a.splice(t,0,s),f(a)},N=async()=>{if(c.trim()&&0!==h.length&&!h.some(e=>!e.exercise_id)){b(!0);try{await i({name:c.trim(),description:x.trim(),muscle_group:g,exercises:h}),a()}finally{b(!1)}}},w=o.reduce((e,t)=>{let a=t.muscleGroup||"Other";return e[a]||(e[a]=[]),e[a].push(t),e},{});return(0,s.jsx)(T.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,s.jsxs)(T.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(T.c7,{children:(0,s.jsx)(T.L3,{children:(null==l?void 0:l.id)?"編輯模板":"建立新模板"})}),(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"name",children:"模板名稱 *"}),(0,s.jsx)(z.p,{id:"name",value:c,onChange:e=>u(e.target.value),placeholder:"例如：胸日、PPL 推"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"description",children:"描述"}),(0,s.jsx)(A,{id:"description",value:x,onChange:e=>m(e.target.value),placeholder:"簡短描述這個模板的訓練目標",rows:2})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(C,{htmlFor:"muscleGroup",children:"主要肌群"}),(0,s.jsxs)(E,{value:g,onValueChange:p,children:[(0,s.jsx)(Z,{children:(0,s.jsx)(G,{placeholder:"選擇肌群"})}),(0,s.jsx)(O,{children:U.map(e=>(0,s.jsx)(P,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(C,{children:"訓練動作 *"}),(0,s.jsxs)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{f([...h,{exercise_id:"",default_sets:3,default_reps:10,default_weight:null}])},children:[(0,s.jsx)(V.A,{className:"w-4 h-4 mr-1"}),"新增動作"]})]}),0===h.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:"點擊「新增動作」來加入訓練動作"}):(0,s.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>(0,s.jsx)(d.Zp,{children:(0,s.jsx)(d.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 pt-2",children:[(0,s.jsx)(R.A,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>y(t,t-1),disabled:0===t,children:"↑"}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>y(t,t+1),disabled:t===h.length-1,children:"↓"})]})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,s.jsxs)(E,{value:e.exercise_id,onValueChange:e=>j(t,"exercise_id",e),children:[(0,s.jsx)(Z,{children:(0,s.jsx)(G,{placeholder:"選擇動作"})}),(0,s.jsx)(O,{children:Object.entries(w).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"px-2 py-1.5 text-sm font-semibold text-muted-foreground",children:t}),a.map(e=>(0,s.jsx)(P,{value:e.id,children:e.name},e.id))]},t)})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(C,{className:"text-xs",children:"組數"}),(0,s.jsx)(z.p,{type:"number",min:1,value:e.default_sets,onChange:e=>j(t,"default_sets",parseInt(e.target.value)||3)})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(C,{className:"text-xs",children:"次數"}),(0,s.jsx)(z.p,{type:"number",min:1,value:e.default_reps||"",onChange:e=>j(t,"default_reps",e.target.value?parseInt(e.target.value):null),placeholder:"選填"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(C,{className:"text-xs",children:"重量 (kg)"}),(0,s.jsx)(z.p,{type:"number",min:0,step:.5,value:e.default_weight||"",onChange:e=>j(t,"default_weight",e.target.value?parseFloat(e.target.value):null),placeholder:"選填"})]})]})]}),(0,s.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>{f(h.filter((e,a)=>a!==t))},children:(0,s.jsx)(D.A,{className:"w-4 h-4"})})]})})},t))})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[(0,s.jsxs)(n.$,{type:"button",variant:"outline",onClick:a,children:[(0,s.jsx)(I.A,{className:"w-4 h-4 mr-1"}),"取消"]}),(0,s.jsxs)(n.$,{onClick:N,disabled:v||!c.trim()||0===h.length,children:[(0,s.jsx)(J.A,{className:"w-4 h-4 mr-1"}),v?"儲存中...":"儲存模板"]})]})]})]})})}var H=a(5299),M=a(5993),Q=a(4982),Y=a(9347),K=a(1010),X=a(7937);let ee={Chest:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",Back:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",Legs:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",Arms:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",Shoulders:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",Core:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200","Full Body":"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"};function et(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[g,h]=(0,r.useState)(void 0),[f,z]=(0,r.useState)(null),[_,C]=(0,r.useState)(null),[A,S]=(0,r.useState)({}),F=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/templates");if(e.ok){let a=await e.json();t(a)}}catch(e){console.error("Failed to fetch templates:",e)}},[]),L=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/exercises");if(e.ok){let t=await e.json();i(t)}}catch(e){console.error("Failed to fetch exercises:",e)}},[]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{await Promise.all([F(),L()]),e&&c(!1)})(),()=>{e=!1}},[F,L]);let $=async e=>{if(!A[e])try{let t=await fetch("/api/templates/".concat(e));if(t.ok){let a=await t.json();S(t=>({...t,[e]:a}))}}catch(e){console.error("Failed to fetch template exercises:",e)}},E=async e=>{try{await fetch("/api/templates/".concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_favorite:!e.isFavorite})}),F()}catch(e){console.error("Failed to toggle favorite:",e)}},G=async e=>{try{await fetch("/api/templates/".concat(e),{method:"DELETE"}),z(null),F()}catch(e){console.error("Failed to delete template:",e)}},Z=async e=>{let t=A[e.id]||[];if(!A[e.id])try{let a=await fetch("/api/templates/".concat(e.id));a.ok&&(t=await a.json(),S(a=>({...a,[e.id]:t})))}catch(e){console.error("Failed to fetch template exercises:",e)}h({id:e.id,name:e.name,description:e.description||"",muscleGroup:e.muscleGroup||"",exercises:t.map(e=>{var t;return{exercise_id:e.exerciseId,exercise_name:null==(t=e.exercise)?void 0:t.name,default_sets:e.defaultSets,default_reps:e.defaultReps,default_weight:e.defaultWeight?Number(e.defaultWeight):null}})}),x(!0)},O=async e=>{try{(null==g?void 0:g.id)&&await fetch("/api/templates/".concat(g.id),{method:"DELETE"}),await fetch("/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),h(void 0),F()}catch(e){console.error("Failed to save template:",e)}},P=()=>{h(void 0),x(!0)};return o?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(H.A,{className:"w-8 h-8 animate-spin"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b",children:(0,s.jsxs)("div",{className:"container flex items-center justify-between h-14 px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l(),{href:"/",children:(0,s.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(M.A,{className:"w-5 h-5"})})}),(0,s.jsx)("h1",{className:"font-semibold",children:"訓練模板"})]}),(0,s.jsxs)(n.$,{onClick:P,children:[(0,s.jsx)(V.A,{className:"w-4 h-4 mr-1"}),"新增模板"]})]})}),(0,s.jsx)("main",{className:"container px-4 py-6 space-y-4",children:0===e.length?(0,s.jsx)(d.Zp,{children:(0,s.jsxs)(d.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(Q.A,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"還沒有任何訓練模板"}),(0,s.jsxs)(n.$,{onClick:P,children:[(0,s.jsx)(V.A,{className:"w-4 h-4 mr-1"}),"建立第一個模板"]})]})}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsxs)(d.Zp,{className:"overflow-hidden",children:[(0,s.jsx)(d.aR,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(d.ZB,{className:"text-lg",children:e.name}),e.isFavorite&&(0,s.jsx)(Y.A,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>E(e),children:(0,s.jsx)(Y.A,{className:"w-4 h-4 ".concat(e.isFavorite?"fill-yellow-400 text-yellow-400":"text-muted-foreground")})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>Z(e),children:(0,s.jsx)(K.A,{className:"w-4 h-4"})}),(0,s.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>z(e.id),children:(0,s.jsx)(D.A,{className:"w-4 h-4"})})]})]})}),(0,s.jsxs)(d.Wu,{className:"pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[e.muscleGroup&&(0,s.jsx)(m,{className:ee[e.muscleGroup]||"bg-gray-100",variant:"secondary",children:e.muscleGroup}),(0,s.jsxs)(m,{variant:"outline",children:[e.exercise_count," 個動作"]}),e.useCount>0&&(0,s.jsxs)(m,{variant:"outline",children:["使用 ",e.useCount," 次"]})]}),(0,s.jsxs)("button",{onClick:()=>{var t;_===(t=e.id)?C(null):(C(t),$(t))},className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(X.A,{className:"w-4 h-4 transition-transform ".concat(_===e.id?"rotate-90":"")}),_===e.id?"收起動作":"查看動作"]}),_===e.id&&A[e.id]&&(0,s.jsx)("div",{className:"mt-3 space-y-2 pl-4 border-l-2",children:A[e.id].map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{children:[t+1,". ",(null==(a=e.exercise)?void 0:a.name)||"Unknown"]}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[e.defaultSets," 組",e.defaultReps&&" \xd7 ".concat(e.defaultReps," 次"),e.defaultWeight&&" @ ".concat(e.defaultWeight,"kg")]})]},e.id)})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(l(),{href:"/log?template=".concat(e.id),children:(0,s.jsxs)(n.$,{className:"w-full",children:[(0,s.jsx)(Q.A,{className:"w-4 h-4 mr-2"}),"使用此模板開始訓練"]})})})]})]},e.id))})}),(0,s.jsx)(q,{open:u,onClose:()=>{x(!1),h(void 0)},onSave:O,initialData:g,exercises:a}),(0,s.jsx)(p,{open:!!f,onOpenChange:()=>z(null),children:(0,s.jsxs)(v,{children:[(0,s.jsxs)(b,{children:[(0,s.jsx)(y,{children:"確定要刪除此模板？"}),(0,s.jsx)(N,{children:"此操作無法復原。模板將被永久刪除。"})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)(k,{children:"取消"}),(0,s.jsx)(w,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:()=>f&&G(f),children:"刪除"})]})]})})]})}},1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>c,L3:()=>x,c7:()=>u,lG:()=>n});var s=a(5155);a(2115);var r=a(5229),i=a(7539),l=a(4269);function n(e){let{...t}=e;return(0,s.jsx)(i.bL,{"data-slot":"dialog",...t})}function d(e){let{...t}=e;return(0,s.jsx)(i.ZL,{"data-slot":"dialog-portal",...t})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function c(e){let{className:t,children:a,showCloseButton:n=!0,...c}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(o,{}),(0,s.jsxs)(i.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...c,children:[a,n&&(0,s.jsxs)(i.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(r.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(i.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...a})}a(3998)},2339:(e,t,a)=>{Promise.resolve().then(a.bind(a,1244))},3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(5155);a(2115);var r=a(3101),i=a(2467),l=a(4269);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a="default",size:r="default",asChild:d=!1,...o}=e,c=d?i.bL:"button";return(0,s.jsx)(c,{"data-slot":"button","data-variant":a,"data-size":r,className:(0,l.cn)(n({variant:a,size:r,className:t})),...o})}},4269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(2821),r=a(5889);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},5142:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155);a(2115);var r=a(4269);function i(e){let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...i})}},6948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,ZB:()=>n,Zp:()=>i,aR:()=>l});var s=a(5155);a(2115);var r=a(4269);function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}}},e=>{e.O(0,[888,243,952,441,255,358],()=>e(e.s=2339)),_N_E=e.O()}]);